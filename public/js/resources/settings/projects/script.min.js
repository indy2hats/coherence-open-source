jQuery(document).ready(function() {
    $('.chosen-select').chosen({
        width: "100%"
    });

    $( "#edit_projects_settings" ).on('submit',function( e ) {
    
        $('.field-error').html('');
        e.preventDefault();
        $("body").append('<div class="overlay"><div class="overlay__inner"><div class="overlay__content"><span class="spinner"></span></div></div></div>');
        var isChecked = $('#project_kanban_view').is(':checked');
        var value = isChecked ? '1' : '0';
        var inputElement = $('<input>').attr('type', 'hidden').attr('name', 'project_kanban_view').val(value);
        $(this).append(inputElement);

        $.ajax({
            type: 'POST',
            url: $('#edit_projects_settings').attr('action'),
            data: new FormData($('#edit_projects_settings')[0]),
            contentType: false,
            cache: false,
            processData: false,
            success: function(response) {
                $(".overlay").remove();
                toastr.success(response.message, 'Saved');
            },
            error: function(error) {
                $(".overlay").remove();
                if (error.responseJSON.errors) {
                    $.each(error.responseJSON.errors, function(field, error) {
                        $('#label_' + field).html(error);
                    });
                }
            }
        });
    });
});