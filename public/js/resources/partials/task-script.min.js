jQuery(document).ready(function() {
var timerRunning = $.cookie('timerRunning');
var totalSeconds = 0;
var interval;
var running_id = $.cookie('running_task');
var taskStartedBy = $.cookie('taskStartedBy');



$(document).on('click', '#pause-task', function (e) {
    e.preventDefault();   
    openLoader();
    var obj = $(this);
    var td = obj.closest('td');
    if ($.cookie('timerRunning') == 'true') {
          $.ajax({
            type: 'POST',
            url: '/pause-session',
            data: {
                'task-id': $.cookie('running_task'),
                'current-task':$('#task-id').data('id')
            },
            success: function (response) { 
                unsetTimer();
                closeLoader();             
                location.reload();
            },
            error: function (error) {
                closeLoader();
                $(".overlay").remove();
                if (error.responseJSON.errors) {
                    $.each(error.responseJSON.errors, function (field, error) {
                        $('#label_' + field).html(error);
                    });
                }
            }
        });      
        window.clearInterval(interval);
        totalSeconds = 0;
    }     
});

function unsetTimer()
{
    var isTimerExist = document.getElementById("seconds");
    if(isTimerExist){
        active= 1;
        totalSeconds=0;
        if(typeof interval != 'undefined')
            window.clearInterval(interval);

        document.getElementById("seconds").innerHTML = "00";
        document.getElementById("minutes").innerHTML = "00";
        document.getElementById("hours").innerHTML = "00";
        var timer= document.getElementById('timer-button');
        if(timer){
        document.getElementById('timer-button').innerHTML="START";
        }
    }
}
});